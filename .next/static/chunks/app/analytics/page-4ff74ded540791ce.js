(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[109],{908:function(e,t,r){Promise.resolve().then(r.bind(r,339))},339:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return S}});var s=r(7437),i=r(4816),l=r(2870),n=r(2988),c=r(2265),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917 211.1l-199.2 24c-6.6.8-9.4 8.9-4.7 13.6l59.3 59.3-226 226-101.8-101.7c-6.3-6.3-16.4-6.2-22.6 0L100.3 754.1a8.03 8.03 0 000 11.3l45 45.2c3.1 3.1 8.2 3.1 11.3 0L433.3 534 535 635.7c6.3 6.2 16.4 6.2 22.6 0L829 364.5l59.3 59.3a8.01 8.01 0 0013.6-4.7l24-199.2c.7-5.1-3.7-9.5-8.9-8.8z"}}]},name:"rise",theme:"outlined"},o=r(5636),d=c.forwardRef(function(e,t){return c.createElement(o.Z,(0,n.Z)({},e,{ref:t,icon:a}))}),x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6a8.03 8.03 0 00-11.3 0l-230 229.9L461.4 404a8.03 8.03 0 00-11.3 0L266.3 586.7a8.03 8.03 0 000 11.3l39.5 39.7z"}}]},name:"line-chart",theme:"outlined"},h=c.forwardRef(function(e,t){return c.createElement(o.Z,(0,n.Z)({},e,{ref:t,icon:x}))}),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 518H506V160c0-4.4-3.6-8-8-8h-26a398.46 398.46 0 00-282.8 117.1 398.19 398.19 0 00-85.7 127.1A397.61 397.61 0 0072 552a398.46 398.46 0 00117.1 282.8c36.7 36.7 79.5 65.6 127.1 85.7A397.61 397.61 0 00472 952a398.46 398.46 0 00282.8-117.1c36.7-36.7 65.6-79.5 85.7-127.1A397.61 397.61 0 00872 552v-26c0-4.4-3.6-8-8-8zM705.7 787.8A331.59 331.59 0 01470.4 884c-88.1-.4-170.9-34.9-233.2-97.2C174.5 724.1 140 640.7 140 552c0-88.7 34.5-172.1 97.2-234.8 54.6-54.6 124.9-87.9 200.8-95.5V586h364.3c-7.7 76.3-41.3 147-96.6 201.8zM952 462.4l-2.6-28.2c-8.5-92.1-49.4-179-115.2-244.6A399.4 399.4 0 00589 74.6L560.7 72c-4.7-.4-8.7 3.2-8.7 7.9V464c0 4.4 3.6 8 8 8l384-1c4.7 0 8.4-4 8-8.6zm-332.2-58.2V147.6a332.24 332.24 0 01166.4 89.8c45.7 45.6 77 103.6 90 166.1l-256.4.7z"}}]},name:"pie-chart",theme:"outlined"},u=c.forwardRef(function(e,t){return c.createElement(o.Z,(0,n.Z)({},e,{ref:t,icon:m}))}),p=r(1029),g=r(9569),f=r(8569),v=r(8421),j=r(8256),y=r(7733),b=r(5381),Z=r(8357),z=r(6463),w=r(8643),N=r(8661);let{Title:R,Text:A}=g.default;function S(){let{user:e,loading:t,isAdmin:r}=(0,N.a)(),n=(0,z.useRouter)(),[a,o]=(0,c.useState)(null),[x,m]=(0,c.useState)(!0);(0,c.useEffect)(()=>{t||e?t||!e||r||(f.ZP.error("Access denied. Admin privileges required."),n.push("/")):n.push("/login")},[e,t,r,n]),(0,c.useEffect)(()=>{e&&r&&g()},[e,r]);let g=async()=>{try{m(!0);let[e,t,r]=await Promise.all([(0,w.pz)(30),(0,w.oh)(),(0,w.vO)(100)]);if(e.error)throw e.error;if(t.error)throw t.error;if(r.error)throw r.error;o({tripAnalytics:e.data||[],routeUtilization:t.data||[],travelHistory:r.data||[]})}catch(e){console.error("Error loading analytics data:",e),f.ZP.error("Failed to load analytics data")}finally{m(!1)}},S=(()=>{if(!a)return null;let e=a.tripAnalytics,t=e.filter(e=>"completed"===e.status),r=e.filter(e=>"cancelled"===e.status),s=e.length,i=s>0?t.length/s*100:0,l=s>0?r.length/s*100:0,n=new Set(e.map(e=>new Date(e.started_at).toDateString())).size,c=a.routeUtilization.filter(e=>e.buses&&e.buses.length>0).length,o=a.routeUtilization.length;return{totalTrips:s,completedTrips:t.length,cancelledTrips:r.length,completionRate:Math.round(i),cancellationRate:Math.round(l),avgTripsPerDay:Math.round(10*(n>0?s/n:0))/10,activeRoutes:c,totalRoutes:o,routeUtilizationRate:Math.round(o>0?c/o*100:0)}})();return t||x?(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,s.jsx)(v.Z,{size:"large"})}):(0,s.jsxs)("div",{className:"admin-layout",children:[(0,s.jsxs)("div",{className:"admin-header",children:[(0,s.jsx)("div",{className:"admin-logo",children:"Miniway Admin Dashboard"}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,s.jsx)(j.ZP,{onClick:()=>n.push("/"),style:{background:"rgba(99, 102, 241, 0.1)",border:"1px solid rgba(99, 102, 241, 0.2)",color:"#6366f1"},children:"Dashboard"}),(0,s.jsx)(j.ZP,{onClick:g,icon:(0,s.jsx)(i.Z,{}),type:"primary",children:"Refresh"})]})]}),(0,s.jsxs)("div",{className:"admin-content",children:[(0,s.jsx)(y.Z,{gutter:[24,24],style:{marginBottom:"32px"},children:(0,s.jsx)(b.Z,{span:24,children:(0,s.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",padding:"32px",borderRadius:"16px",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",textAlign:"center"},children:[(0,s.jsx)(R,{level:1,style:{color:"white",marginBottom:"12px",fontSize:"48px",fontWeight:"800",textShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:"Analytics & Reports"}),(0,s.jsx)(A,{style:{color:"rgba(255, 255, 255, 0.9)",fontSize:"18px",fontWeight:"500"},children:"Comprehensive insights into your transportation network performance"})]})})}),(0,s.jsxs)(y.Z,{gutter:[24,24],style:{marginBottom:"32px"},children:[(0,s.jsx)(b.Z,{xs:24,sm:12,md:6,children:(0,s.jsx)(Z.Z,{className:"metrics-card",children:(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsx)("div",{style:{marginBottom:"16px"},children:(0,s.jsx)(l.Z,{style:{fontSize:"32px",color:"#6366f1"}})}),(0,s.jsx)("div",{className:"metrics-value",style:{color:"#6366f1"},children:(null==S?void 0:S.totalTrips)||0}),(0,s.jsx)("div",{className:"metrics-label",children:"Total Trips (30 days)"})]})})}),(0,s.jsx)(b.Z,{xs:24,sm:12,md:6,children:(0,s.jsx)(Z.Z,{className:"metrics-card",children:(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsx)("div",{style:{marginBottom:"16px"},children:(0,s.jsx)(d,{style:{fontSize:"32px",color:"#10b981"}})}),(0,s.jsxs)("div",{className:"metrics-value",style:{color:"#10b981"},children:[(null==S?void 0:S.completionRate)||0,"%"]}),(0,s.jsx)("div",{className:"metrics-label",children:"Completion Rate"})]})})}),(0,s.jsx)(b.Z,{xs:24,sm:12,md:6,children:(0,s.jsx)(Z.Z,{className:"metrics-card",children:(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsx)("div",{style:{marginBottom:"16px"},children:(0,s.jsx)(h,{style:{fontSize:"32px",color:"#8b5cf6"}})}),(0,s.jsx)("div",{className:"metrics-value",style:{color:"#8b5cf6"},children:(null==S?void 0:S.avgTripsPerDay)||0}),(0,s.jsx)("div",{className:"metrics-label",children:"Avg Trips/Day"})]})})}),(0,s.jsx)(b.Z,{xs:24,sm:12,md:6,children:(0,s.jsx)(Z.Z,{className:"metrics-card",children:(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsx)("div",{style:{marginBottom:"16px"},children:(0,s.jsx)(u,{style:{fontSize:"32px",color:"#06b6d4"}})}),(0,s.jsxs)("div",{className:"metrics-value",style:{color:"#06b6d4"},children:[(null==S?void 0:S.routeUtilizationRate)||0,"%"]}),(0,s.jsx)("div",{className:"metrics-label",children:"Route Utilization"})]})})})]}),(0,s.jsxs)(y.Z,{gutter:[24,24],style:{marginBottom:"32px"},children:[(0,s.jsx)(b.Z,{xs:24,sm:12,md:8,children:(0,s.jsx)(Z.Z,{className:"metrics-card",children:(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsx)("div",{style:{marginBottom:"16px"},children:(0,s.jsx)(p.Z,{style:{fontSize:"32px",color:"#10b981"}})}),(0,s.jsx)("div",{className:"metrics-value",style:{color:"#10b981"},children:(null==S?void 0:S.completedTrips)||0}),(0,s.jsx)("div",{className:"metrics-label",children:"Completed Trips"})]})})}),(0,s.jsx)(b.Z,{xs:24,sm:12,md:8,children:(0,s.jsx)(Z.Z,{className:"metrics-card",children:(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsx)("div",{style:{marginBottom:"16px"},children:(0,s.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"16px",fontWeight:"bold",margin:"0 auto"},children:"âœ•"})}),(0,s.jsx)("div",{className:"metrics-value",style:{color:"#ef4444"},children:(null==S?void 0:S.cancelledTrips)||0}),(0,s.jsx)("div",{className:"metrics-label",children:"Cancelled Trips"})]})})}),(0,s.jsx)(b.Z,{xs:24,sm:12,md:8,children:(0,s.jsx)(Z.Z,{className:"metrics-card",children:(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsx)("div",{style:{marginBottom:"16px"},children:(0,s.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"16px",fontWeight:"bold",margin:"0 auto"},children:"%"})}),(0,s.jsxs)("div",{className:"metrics-value",style:{color:"#f59e0b"},children:[(null==S?void 0:S.cancellationRate)||0,"%"]}),(0,s.jsx)("div",{className:"metrics-label",children:"Cancellation Rate"})]})})})]}),(0,s.jsx)(y.Z,{gutter:[24,24],style:{marginBottom:"32px"},children:(0,s.jsx)(b.Z,{span:24,children:(0,s.jsx)(Z.Z,{title:(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,s.jsx)(u,{style:{color:"#06b6d4",fontSize:"20px"}}),(0,s.jsx)("span",{children:"Route Performance"})]}),children:(0,s.jsxs)("div",{style:{textAlign:"center",padding:"60px 0",background:"linear-gradient(135deg, rgba(6, 182, 212, 0.1) 0%, rgba(8, 145, 178, 0.1) 100%)",borderRadius:"12px",border:"1px solid rgba(6, 182, 212, 0.2)"},children:[(0,s.jsx)(u,{style:{fontSize:"48px",color:"#06b6d4",marginBottom:"16px"}}),(0,s.jsx)(A,{style:{fontSize:"16px",color:"#64748b",fontWeight:"500"},children:"Route performance charts and detailed analytics coming soon."}),(0,s.jsx)("br",{}),(0,s.jsx)(A,{style:{fontSize:"14px",color:"#94a3b8"},children:"This will include trip volume, completion rates, and passenger satisfaction metrics per route."})]})})})}),(0,s.jsx)(y.Z,{gutter:[24,24],children:(0,s.jsx)(b.Z,{span:24,children:(0,s.jsx)(Z.Z,{title:(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,s.jsx)(l.Z,{style:{color:"#6366f1",fontSize:"20px"}}),(0,s.jsx)("span",{children:"Recent Travel History"})]}),children:(0,s.jsxs)("div",{style:{textAlign:"center",padding:"60px 0",background:"linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%)",borderRadius:"12px",border:"1px solid rgba(99, 102, 241, 0.2)"},children:[(0,s.jsx)(l.Z,{style:{fontSize:"48px",color:"#6366f1",marginBottom:"16px"}}),(0,s.jsx)(A,{style:{fontSize:"16px",color:"#64748b",fontWeight:"500"},children:"Recent travel history and passenger journey analytics coming soon."}),(0,s.jsx)("br",{}),(0,s.jsx)(A,{style:{fontSize:"14px",color:"#94a3b8"},children:"This will show detailed passenger travel patterns and popular routes."})]})})})})]})]})}},2870:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var s=r(2988),i=r(2265),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"},n=r(5636),c=i.forwardRef(function(e,t){return i.createElement(n.Z,(0,s.Z)({},e,{ref:t,icon:l}))})},1029:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var s=r(2988),i=r(2265),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},n=r(5636),c=i.forwardRef(function(e,t){return i.createElement(n.Z,(0,s.Z)({},e,{ref:t,icon:l}))})},4816:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var s=r(2988),i=r(2265),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},n=r(5636),c=i.forwardRef(function(e,t){return i.createElement(n.Z,(0,s.Z)({},e,{ref:t,icon:l}))})},5381:function(e,t,r){"use strict";var s=r(265);t.Z=s.Z},7733:function(e,t,r){"use strict";var s=r(3690);t.Z=s.Z}},function(e){e.O(0,[377,943,882,971,23,744],function(){return e(e.s=908)}),_N_E=e.O()}]);