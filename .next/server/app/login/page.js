(()=>{var e={};e.id=626,e.ids=[626],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},6921:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),r(4687),r(9116),r(5866);var a=r(3191),s=r(8716),i=r(7922),n=r.n(i),o=r(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4687)),"D:\\React Native\\admin-dashboard\\app\\login\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,9116)),"D:\\React Native\\admin-dashboard\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\React Native\\admin-dashboard\\app\\login\\page.tsx"],u="/login/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1660:(e,t,r)=>{Promise.resolve().then(r.bind(r,3023))},5710:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},3644:(e,t,r)=>{Promise.resolve().then(r.bind(r,2578)),Promise.resolve().then(r.bind(r,1973))},3023:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var a=r(326),s=r(1696),i=r(331),n=r(5353),o=r(7577);let l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"};var d=r(4082),c=o.forwardRef(function(e,t){return o.createElement(d.Z,(0,n.Z)({},e,{ref:t,icon:l}))}),u=r(9636),p=r(2170),m=r(784),h=r(6709),x=r(9270),g=r(8506),f=r(1063),v=r(5047),y=r(1973);let{Title:b,Text:P}=u.default;function w(){let[e,t]=(0,o.useState)(!1),{signIn:r}=(0,y.a)(),n=(0,v.useRouter)(),l=async e=>{try{t(!0),await r(e.email,e.password),p.ZP.success("Login successful!"),n.push("/")}catch(e){p.ZP.error(e.message||"Login failed")}finally{t(!1)}};return a.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},children:(0,a.jsxs)(m.Z,{style:{width:"100%",maxWidth:400,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[(0,a.jsxs)("div",{style:{textAlign:"center",marginBottom:"32px"},children:[a.jsx(s.Z,{style:{fontSize:"48px",color:"#1890ff",marginBottom:"16px"}}),a.jsx(b,{level:2,style:{margin:0,color:"#1890ff"},children:"Miniway Admin"}),a.jsx(P,{type:"secondary",children:"Transportation Management System"})]}),(0,a.jsxs)(h.Z,{name:"login",onFinish:l,autoComplete:"off",size:"large",children:[a.jsx(h.Z.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"Please enter a valid email!"}],children:a.jsx(x.default,{prefix:a.jsx(i.Z,{}),placeholder:"Email"})}),a.jsx(h.Z.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],children:a.jsx(x.default.Password,{prefix:a.jsx(c,{}),placeholder:"Password"})}),a.jsx(h.Z.Item,{children:a.jsx(g.ZP,{type:"primary",htmlType:"submit",style:{width:"100%"},loading:e,children:e?a.jsx(f.Z,{size:"small"}):"Sign In"})})]}),a.jsx("div",{style:{textAlign:"center",marginTop:"16px"},children:a.jsx(P,{type:"secondary",style:{fontSize:"12px"},children:"Admin access only. Contact system administrator for credentials."})})]})})}},1973:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>o,a:()=>l});var a=r(326),s=r(7577),i=r(5442);let n=(0,s.createContext)(void 0);function o({children:e}){let[t,r]=(0,s.useState)(null),[o,l]=(0,s.useState)(!0),[d,c]=(0,s.useState)(!1),[u,p]=(0,s.useState)(!1),m=async e=>{try{let{data:t,error:r}=await i.O.from("users").select("role").eq("id",e).single();if(r){console.log("Custom users table not found or error:",r.message);let{data:{user:e}}=await i.O.auth.getUser();if(e){let t=e.user_metadata?.role==="admin"||e.user_metadata?.is_admin===!0||e.email?.includes("admin")||e.email?.includes("miniway");c(!!t),console.log("Admin status from metadata:",t)}else c(!1);return}c(t?.role==="admin")}catch(e){console.error("Error checking admin status:",e),c(!0)}},h=async()=>{try{let{data:e,error:t}=await i.O.auth.refreshSession();if(t)throw console.error("Error refreshing session:",t),t;return e}catch(e){throw console.error("Error refreshing session:",e),e}},x=async(e,t)=>{try{l(!0);let{data:r,error:a}=await i.O.auth.signInWithPassword({email:e,password:t});if(a)throw console.error("Sign in error:",a),a;r.user&&await m(r.user.id)}finally{l(!1)}},g=async()=>{try{l(!0);let{error:e}=await i.O.auth.signOut({scope:"global"});e&&console.error("Sign out error:",e),r(null),c(!1),p(!1)}finally{l(!1)}};return a.jsx(n.Provider,{value:{user:t,loading:o||!u,signIn:x,signOut:g,isAdmin:d,refreshSession:h},children:e})}function l(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5442:(e,t,r)=>{"use strict";r.d(t,{O:()=>a});let a=(0,r(7608).eI)("https://nbbtnqdvizaxajvaijbv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5iYnRucWR2aXpheGFqdmFpamJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI0Njk3MjYsImV4cCI6MjA2ODA0NTcyNn0.nTNvDYvZgSErdEEX4GZ36BmGIsbHnMEqQZ40gKub6IU",{auth:{storage:{getItem:e=>null,setItem:(e,t)=>{},removeItem:e=>{}},autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1,flowType:"pkce"}})},1696:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var a=r(5353),s=r(7577);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M380 704h264c4.4 0 8-3.6 8-8v-84c0-4.4-3.6-8-8-8h-40c-4.4 0-8 3.6-8 8v36H428v-36c0-4.4-3.6-8-8-8h-40c-4.4 0-8 3.6-8 8v84c0 4.4 3.6 8 8 8zm340-123a40 40 0 1080 0 40 40 0 10-80 0zm239-167.6L935.3 372a8 8 0 00-10.9-2.9l-50.7 29.6-78.3-216.2a63.9 63.9 0 00-60.9-44.4H301.2c-34.7 0-65.5 22.4-76.2 55.5l-74.6 205.2-50.8-29.6a8 8 0 00-10.9 2.9L65 413.4c-2.2 3.8-.9 8.6 2.9 10.8l60.4 35.2-14.5 40c-1.2 3.2-1.8 6.6-1.8 10v348.2c0 15.7 11.8 28.4 26.3 28.4h67.6c12.3 0 23-9.3 25.6-22.3l7.7-37.7h545.6l7.7 37.7c2.7 13 13.3 22.3 25.6 22.3h67.6c14.5 0 26.3-12.7 26.3-28.4V509.4c0-3.4-.6-6.8-1.8-10l-14.5-40 60.3-35.2a8 8 0 003-10.8zM840 517v237H184V517l15.6-43h624.8l15.6 43zM292.7 218.1l.5-1.3.4-1.3c1.1-3.3 4.1-5.5 7.6-5.5h427.6l75.4 208H220l72.7-199.9zM224 581a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"car",theme:"outlined"};var n=r(4082);let o=s.forwardRef(function(e,t){return s.createElement(n.Z,(0,a.Z)({},e,{ref:t,icon:i}))})},331:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var a=r(5353),s=r(7577);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"};var n=r(4082);let o=s.forwardRef(function(e,t){return s.createElement(n.Z,(0,a.Z)({},e,{ref:t,icon:i}))})},2578:(e,t,r)=>{"use strict";r.d(t,{ConfigProvider:()=>a.ZP});var a=r(5562)},9116:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g,metadata:()=>x});var a=r(9510),s=r(7366),i=r.n(s),n=r(8570);let o=(0,n.createProxy)(String.raw`D:\React Native\admin-dashboard\node_modules\antd\es\index.js@__barrel_optimize__?names=ConfigProvider`),{__esModule:l,$$typeof:d}=o;o.default;let c=(0,n.createProxy)(String.raw`D:\React Native\admin-dashboard\node_modules\antd\es\index.js@__barrel_optimize__?names=ConfigProvider#ConfigProvider`);r(7272);let u=(0,n.createProxy)(String.raw`D:\React Native\admin-dashboard\app\providers\AuthProvider.tsx`),{__esModule:p,$$typeof:m}=u;u.default;let h=(0,n.createProxy)(String.raw`D:\React Native\admin-dashboard\app\providers\AuthProvider.tsx#AuthProvider`);(0,n.createProxy)(String.raw`D:\React Native\admin-dashboard\app\providers\AuthProvider.tsx#useAuth`);let x={title:"Miniway Admin Dashboard",description:"Comprehensive admin dashboard for Miniway transportation system"};function g({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:i().className,children:a.jsx(c,{theme:{token:{colorPrimary:"#6366f1",colorSuccess:"#10b981",colorWarning:"#f59e0b",colorError:"#ef4444",colorInfo:"#3b82f6",borderRadius:8,fontSize:14,fontFamily:"Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)",boxShadowSecondary:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)"},components:{Layout:{headerBg:"#ffffff",siderBg:"#f8fafc"},Card:{borderRadius:12,boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)"},Button:{borderRadius:8,controlHeight:40},Input:{borderRadius:8,controlHeight:40}}},children:a.jsx(h,{children:e})})})})}},4687:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var a=r(8570);let s=(0,a.createProxy)(String.raw`D:\React Native\admin-dashboard\app\login\page.tsx`),{__esModule:i,$$typeof:n}=s;s.default;let o=(0,a.createProxy)(String.raw`D:\React Native\admin-dashboard\app\login\page.tsx#default`)},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[206,399,454,817],()=>r(6921));module.exports=a})();